{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Event Management{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
  </head>

  <body class="bg-gray-100 text-center min-h-screen flex flex-col">
    <!-- Navbar -->
    <nav class="bg-white shadow-lg fixed top-0 left-0 right-0 z-50" style="height: 64px">
      <div class="container mx-auto flex justify-between items-center h-16 px-4 md:px-0">
        <div class="flex items-center space-x-2">
          <a href="/">
            <!-- Logo -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor" class="size-6 text-blue-900">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 
                2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 
                2.25 0 0 0 21 18.75" />
            </svg>
          </a>
          <a href="/" class="text-xl font-bold text-blue-600">Triple Events</a>
        </div>

        <div class="space-x-4 hidden sm:flex">
          <a href="/" class="text-gray-600 hover:text-blue-500">Home</a>
          <a href="{% url 'all_events' %}" class="text-gray-600 hover:text-blue-500">Events</a>

          {% if user.is_authenticated %}
            {% if user.groups.all|length > 0 %}
              {% with group=user.groups.first %}
                {% if group.name == "Organizer" %}
                  <a href="{% url 'organizer_dashboard' %}" class="text-gray-600 hover:text-blue-500">Dashboard</a>
                {% elif group.name == "Participant" %}
                  <a href="{% url 'participant_dashboard' %}" class="text-gray-600 hover:text-blue-500">Dashboard</a>
                {% endif %}
              {% endwith %}
            {% elif user.is_superuser %}
              <a href="{% url 'admin_dashboard' %}" class="text-gray-600 hover:text-blue-500">Dashboard</a>
            {% endif %}
          {% endif %}

          <a href="/contact/" class="text-gray-600 hover:text-blue-500">Contact</a>
          <a href="/aboutus/" class="text-gray-600 hover:text-blue-500">About Us</a>
          <a href="{% url 'search_events' %}" class="text-gray-600 hover:text-blue-500">Search</a>
        </div>

        <!-- User Auth -->
        <div class="relative" x-data="{ open: false }">
          {% if user.is_authenticated %}
          {% comment %} Click on the name to see profile and password options  {% endcomment %}
            <button @click="open = !open" class="text-gray-600 hover:text-blue-600 font-medium focus:outline-none">
              Hi, {{ user.first_name|default:user.username }}
            </button>
            <div x-show="open" @click.away="open = false"
                 class="absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-50 text-left">
              <a href="{% url 'profile' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
              <a href="{% url 'edit_profile' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Edit Profile</a>
              <a href="{% url 'password_change' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Change Password</a>
              <form method="POST" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit"
                        class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                  Sign Out
                </button>
              </form>
            </div>
          {% else %}
            <div class="flex items-center gap-3">
              <a href="{% url 'signup' %}" class="px-4 py-1.5 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700 transition">Sign Up</a>
              <a href="{% url 'login' %}" class="px-4 py-1.5 text-sm font-medium text-blue-600 border border-blue-600 rounded hover:bg-blue-50 transition">Sign In</a>
            </div>
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16 pb-20 max-w-4xl mx-auto px-4 sm:px-0 flex-grow">
      {% block content %}{% endblock %}
    </main>

        <!-- Footer -->
    <footer class="bg-white shadow-inner mt-16">
      <!-- Your footer content here -->
    </footer>



  </body>
</html>
